version: '1.9.1.{build}-{branch}'

clone_folder: c:\projects\gsd

image: Visual Studio 2015

environment:
  PYTHONPATH: c:\projects\gsd\build
  PATH: 'C:\Python37-x64;C:\Python37-x64\Scripts;%PATH%'

platform:
  - x64

configuration: Release

install:
  - ps: python -m pip --disable-pip-version-check install numpy cython pytest

before_build:
  - ps: mkdir build
  - ps: cd build
  - ps: cmake ../ -G "Visual Studio 14 2015 Win64"

test_script:
  - ps: cp .\gsd\Release\*.pyd gsd\
  - ps: cd ..
  - cmd: pytest --junit-xml=test.xml
